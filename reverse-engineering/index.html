<!DOCTYPE html>
<html lang="tr" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Android APK Analizi | Ahmet Buğra</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="noise-overlay"></div>
    
    <header class="header">
        <div class="container">
            <a href="/" class="logo">
                <span class="logo-bracket">[</span>
                <span class="logo-text">ahmetbugra</span>
                <span class="logo-bracket">]</span>
            </a>
            <nav class="nav">
                <a href="/" class="nav-link">Blog</a>
                <a href="/#about" class="nav-link">Hakkımda</a>
                <a href="https://github.com/ahmetbugra" class="nav-link" target="_blank">GitHub</a>
                <button class="theme-toggle" id="themeToggle" aria-label="Tema Değiştir">
                    <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                    <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                </button>
            </nav>
            <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Menü">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </header>

    <nav class="mobile-nav" id="mobileNav">
        <a href="/" class="nav-link">Blog</a>
        <a href="/#about" class="nav-link">Hakkımda</a>
        <a href="https://github.com/ahmetbugra" class="nav-link" target="_blank">GitHub</a>
    </nav>

    <main class="main">
        <article>
            <header class="post-header">
                <div class="container">
                    <a href="/" class="back-link">
                        <span class="arrow">←</span> Tüm yazılar
                    </a>
                    <div class="post-header-meta">
                        <time datetime="2024-11-25">25 Kasım 2024</time>
                        <span class="post-header-category">Reverse Engineering</span>
                    </div>
                    <h1 class="post-header-title">Android APK Analizi</h1>
                    <p class="post-header-excerpt">
                        Android uygulamalarını decompile etme, statik ve dinamik analiz teknikleri ile güvenlik açıklarını tespit etme yöntemleri.
                    </p>
                </div>
            </header>

            <div class="post-content">
                <div class="container">
                    <h2>Android Uygulama Yapısı</h2>
                    <p>
                        Android uygulamaları APK (Android Package) formatında dağıtılır. Bir APK dosyası aslında bir ZIP arşividir ve şu bileşenleri içerir:
                    </p>
                    <ul>
                        <li><strong>classes.dex:</strong> Derlenmiş Dalvik bytecode</li>
                        <li><strong>resources.arsc:</strong> Derlenmiş kaynaklar</li>
                        <li><strong>AndroidManifest.xml:</strong> Uygulama manifest dosyası</li>
                        <li><strong>res/:</strong> Kaynak dosyaları (layout, drawable vb.)</li>
                        <li><strong>lib/:</strong> Native kütüphaneler (.so dosyaları)</li>
                        <li><strong>META-INF/:</strong> İmza bilgileri</li>
                    </ul>

                    <h2>Statik Analiz Araçları</h2>

                    <h3>1. jadx - Dex to Java Decompiler</h3>
                    <p>
                        jadx, DEX dosyalarını okunabilir Java koduna dönüştüren popüler bir araçtır:
                    </p>

                    <pre><code># jadx kurulumu
brew install jadx  # macOS
apt install jadx   # Linux

# GUI ile açma
jadx-gui app.apk

# Komut satırından decompile
jadx -d output_dir app.apk</code></pre>

                    <h3>2. apktool - APK Disassembly</h3>
                    <p>
                        apktool, APK'ları smali koduna dönüştürür ve yeniden derlemeye izin verir:
                    </p>

                    <pre><code># Decompile
apktool d app.apk -o app_decompiled

# Yeniden derleme
apktool b app_decompiled -o app_modified.apk</code></pre>

                    <h3>3. MobSF - Mobile Security Framework</h3>
                    <p>
                        MobSF, otomatik statik ve dinamik analiz yapabilen kapsamlı bir platformdur:
                    </p>

                    <pre><code># Docker ile çalıştırma
docker run -it --rm -p 8000:8000 opensecurity/mobile-security-framework-mobsf

# Tarayıcıdan erişim
# http://localhost:8000</code></pre>

                    <h2>Önemli Dosyaların Analizi</h2>

                    <h3>AndroidManifest.xml</h3>
                    <p>
                        Manifest dosyası uygulamanın izinlerini, componentlerini ve yapılandırmasını içerir:
                    </p>

                    <pre><code>&lt;manifest package="com.example.app"&gt;
    &lt;!-- Tehlikeli izinler --&gt;
    &lt;uses-permission android:name="android.permission.READ_SMS"/&gt;
    &lt;uses-permission android:name="android.permission.CAMERA"/&gt;
    
    &lt;!-- Export edilen componentler - güvenlik riski! --&gt;
    &lt;activity android:name=".AdminActivity" 
              android:exported="true"/&gt;
    
    &lt;!-- Debug modda mı? --&gt;
    &lt;application android:debuggable="true"&gt;
    &lt;/application&gt;
&lt;/manifest&gt;</code></pre>

                    <h3>Hardcoded Secrets Araması</h3>
                    <p>
                        Kaynak kodda API anahtarları ve şifreler aranmalıdır:
                    </p>

                    <pre><code># Regex ile hassas veri araması
grep -r "api[_-]?key" ./decompiled/
grep -r "password" ./decompiled/
grep -r "secret" ./decompiled/
grep -r "private[_-]?key" ./decompiled/

# Base64 encoded string araması
grep -rE "[A-Za-z0-9+/]{40,}={0,2}" ./decompiled/</code></pre>

                    <h2>Dinamik Analiz</h2>

                    <h3>Frida ile Runtime Analiz</h3>
                    <p>
                        Frida, uygulamanın çalışma zamanında fonksiyonları hook'lamaya olanak tanır:
                    </p>

                    <pre><code>// Method çağrılarını loglama
Java.perform(function() {
    var MainActivity = Java.use("com.example.app.MainActivity");
    
    MainActivity.checkLicense.implementation = function() {
        console.log("[*] checkLicense called");
        var result = this.checkLicense();
        console.log("[*] Result: " + result);
        return result;
    };
});

// Tüm method çağrılarını trace etme
Java.perform(function() {
    var targetClass = Java.use("com.example.app.CryptoUtils");
    var methods = targetClass.class.getDeclaredMethods();
    
    methods.forEach(function(method) {
        console.log("[*] Found method: " + method.getName());
    });
});</code></pre>

                    <h3>Logcat ile Debug</h3>
                    <p>
                        Android logları önemli bilgiler içerebilir:
                    </p>

                    <pre><code># Tüm logları görüntüle
adb logcat

# Belirli bir uygulama için
adb logcat --pid=$(adb shell pidof -s com.example.app)

# Hata logları
adb logcat *:E</code></pre>

                    <h2>Yaygın Güvenlik Açıkları</h2>

                    <h3>1. Insecure Data Storage</h3>
                    <pre><code># SharedPreferences kontrolü
adb shell cat /data/data/com.example.app/shared_prefs/*.xml

# SQLite veritabanları
adb pull /data/data/com.example.app/databases/</code></pre>

                    <h3>2. Exported Components</h3>
                    <pre><code># Export edilen activity'yi çağırma
adb shell am start -n com.example.app/.AdminActivity

# Broadcast gönderme
adb shell am broadcast -a com.example.CUSTOM_ACTION</code></pre>

                    <h3>3. WebView Güvenliği</h3>
                    <pre><code>// Tehlikeli WebView yapılandırması
webView.getSettings().setJavaScriptEnabled(true);
webView.addJavascriptInterface(new JsInterface(), "Android");
webView.loadUrl(userControlledUrl); // XSS riski!</code></pre>

                    <h2>Araç Seti Özeti</h2>
                    <ul>
                        <li><strong>jadx:</strong> Java decompiler</li>
                        <li><strong>apktool:</strong> Smali disassembler</li>
                        <li><strong>Frida:</strong> Dinamik instrumentasyon</li>
                        <li><strong>Objection:</strong> Frida wrapper</li>
                        <li><strong>MobSF:</strong> Otomatik analiz</li>
                        <li><strong>Ghidra:</strong> Native code analizi</li>
                        <li><strong>dex2jar:</strong> DEX to JAR dönüşümü</li>
                    </ul>

                    <blockquote>
                        <p>
                            Reverse engineering yaparken her zaman yasal sınırlar içinde kalın. Sadece kendi uygulamalarınızı veya izin aldığınız uygulamaları analiz edin.
                        </p>
                    </blockquote>
                </div>
            </div>
        </article>
    </main>

    <footer class="footer">
        <div class="container">
            <p class="footer-text">
                <span class="footer-year">© 2024</span> 
                <span class="footer-separator">|</span>
                <span>Ahmet Buğra</span>
                <span class="footer-separator">|</span>
                <span class="footer-made">Made with <span class="heart">♥</span> and caffeine</span>
            </p>
        </div>
    </footer>

    <script src="../script.js"></script>
</body>
</html>

